datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

// generator typegraphql {
//     provider = "typegraphql-prisma"
// }

model Message {
    id             Int           @id @default(autoincrement())
    content        String
    role           String
    sender         String
    avatarSource   String
    conversation   Conversation? @relation(fields: [conversationId], references: [id], onDelete: Cascade)
    conversationId Int?
    starred        Boolean?      @default(false)
    createdAt      DateTime?     @default(now())
}

model Conversation {
    id       Int       @id @default(autoincrement())
    name     String?
    messages Message[]
    isPublic Boolean   @default(false)
}

model Feature {
    id          Int     @id @default(autoincrement())
    name        String
    description String
    starred     Boolean @default(false)
}

model Task {
    id       Int     @id @default(autoincrement())
    name     String
    complete Boolean @default(false)
}

model User {
    id       Int       @id @default(autoincrement())
    username String    @unique
    password String
    sessions Session[]
}

model Session {
    id           Int      @id @default(autoincrement())
    sessionToken String   @unique
    accessToken  String?
    expiresAt    DateTime
    user         User     @relation(fields: [userId], references: [id])
    userId       Int
}
